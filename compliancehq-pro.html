<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ComplianceHQ Pro - License & Certification Tracking</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}:root{--bg:#f8fafc;--card:#fff;--border:#e2e8f0;--text:#0f172a;--muted:#64748b;--primary:#0ea5e9;--success:#22c55e;--warning:#f59e0b;--danger:#ef4444}body{font-family:'Plus Jakarta Sans',sans-serif;background:var(--bg);color:var(--text)}.app{display:flex;min-height:100vh}.sidebar{width:220px;background:var(--card);border-right:1px solid var(--border);padding:20px;position:fixed;height:100vh}.logo{display:flex;align-items:center;gap:10px;margin-bottom:24px}.logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--primary),#06b6d4);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px}.logo-text{font-weight:700;font-size:18px}.pro-badge{background:var(--primary);color:white;font-size:10px;padding:2px 6px;border-radius:4px;margin-left:4px}.nav-item{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:8px;cursor:pointer;color:var(--muted);margin-bottom:4px;font-size:14px}.nav-item:hover,.nav-item.active{background:rgba(14,165,233,.1);color:var(--primary)}.main{flex:1;margin-left:220px;padding:24px}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.title{font-size:22px;font-weight:700}.btn{padding:10px 18px;border-radius:8px;font-weight:600;cursor:pointer;border:none;font-family:inherit;font-size:14px}.btn-primary{background:var(--primary);color:white}.btn-secondary{background:white;border:1px solid var(--border)}.btn-sm{padding:6px 12px;font-size:12px}.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:20px}.stat-card{background:var(--card);border-radius:12px;padding:16px;border:1px solid var(--border)}.stat-label{font-size:11px;color:var(--muted);text-transform:uppercase;margin-bottom:6px}.stat-value{font-size:24px;font-weight:700}.card{background:var(--card);border-radius:12px;border:1px solid var(--border);overflow:hidden;margin-bottom:20px}.card-header{padding:14px 18px;border-bottom:1px solid var(--border);font-weight:600;display:flex;justify-content:space-between;align-items:center}.table{width:100%;border-collapse:collapse}.table th,.table td{padding:12px 14px;text-align:left;border-bottom:1px solid var(--border);font-size:14px}.table th{background:var(--bg);font-weight:600;font-size:11px;text-transform:uppercase;color:var(--muted)}.badge{padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600}.badge-valid{background:rgba(34,197,94,.15);color:var(--success)}.badge-expiring{background:rgba(245,158,11,.15);color:var(--warning)}.badge-expired{background:rgba(239,68,68,.15);color:var(--danger)}.view{display:none}.view.active{display:block}.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:100}.modal-overlay.show{display:flex}.modal{background:var(--card);border-radius:16px;padding:24px;width:100%;max-width:500px}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-title{font-size:18px;font-weight:700}.close-btn{background:none;border:none;font-size:24px;cursor:pointer;color:var(--muted)}.form-group{margin-bottom:14px}.form-label{display:block;font-size:13px;font-weight:500;margin-bottom:6px}.form-input,.form-select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--border);font-size:14px;font-family:inherit}.form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}.alert-card{padding:16px;border-radius:8px;margin-bottom:12px;display:flex;align-items:center;gap:12px}.alert-warning{background:rgba(245,158,11,.1);border-left:4px solid var(--warning)}.alert-danger{background:rgba(239,68,68,.1);border-left:4px solid var(--danger)}@media(max-width:900px){.stats{grid-template-columns:repeat(2,1fr)}}@media(max-width:768px){.sidebar{display:none}.main{margin-left:0}}
  </style>
</head>
<body>
  <div class="app">
    <nav class="sidebar">
      <div class="logo"><div class="logo-icon">üìã</div><span class="logo-text">ComplianceHQ <span class="pro-badge">PRO</span></span></div>
      <div class="nav-item active" onclick="showView('dashboard')">üìä Dashboard</div>
      <div class="nav-item" onclick="showView('licenses')">üìú Licenses</div>
      <div class="nav-item" onclick="showView('employees')">üë• Employees</div>
      <div class="nav-item" onclick="showView('alerts')">üîî Alerts</div>
      <div class="nav-item" onclick="showView('audit')">üìù Audit Log</div>
      <div class="nav-item" onclick="showView('reports')">üìà Reports</div>
    </nav>
    <main class="main">
      <div id="view-dashboard" class="view active">
        <div class="header"><h1 class="title">Compliance Dashboard</h1><button class="btn btn-primary" onclick="openModal()">+ Add License</button></div>
        <div class="stats">
          <div class="stat-card"><div class="stat-label">Total Licenses</div><div class="stat-value" id="stat-total">0</div></div>
          <div class="stat-card"><div class="stat-label">Valid</div><div class="stat-value" style="color:var(--success)" id="stat-valid">0</div></div>
          <div class="stat-card"><div class="stat-label">Expiring Soon</div><div class="stat-value" style="color:var(--warning)" id="stat-expiring">0</div></div>
          <div class="stat-card"><div class="stat-label">Expired</div><div class="stat-value" style="color:var(--danger)" id="stat-expired">0</div></div>
        </div>
        <div class="card"><div class="card-header"><span>Expiring Soon</span></div><div id="expiring-list" style="padding:16px"></div></div>
        <div class="card"><div class="card-header"><span>Recent Licenses</span></div><table class="table"><thead><tr><th>Employee</th><th>License</th><th>Expires</th><th>Status</th></tr></thead><tbody id="recent-licenses"></tbody></table></div>
      </div>
      <div id="view-licenses" class="view">
        <div class="header"><h1 class="title">All Licenses</h1><button class="btn btn-primary" onclick="openModal()">+ Add License</button></div>
        <div class="card"><table class="table"><thead><tr><th>Employee</th><th>License Type</th><th>Number</th><th>Issue Date</th><th>Expiry</th><th>Status</th><th>Actions</th></tr></thead><tbody id="all-licenses"></tbody></table></div>
      </div>
      <div id="view-employees" class="view">
        <div class="header"><h1 class="title">Employees</h1><button class="btn btn-primary" onclick="addEmployee()">+ Add Employee</button></div>
        <div class="card"><table class="table"><thead><tr><th>Name</th><th>Department</th><th>Licenses</th><th>Compliance</th></tr></thead><tbody id="all-employees"></tbody></table></div>
      </div>
      <div id="view-alerts" class="view">
        <div class="header"><h1 class="title">Compliance Alerts</h1></div>
        <div id="alerts-list"></div>
      </div>
      <div id="view-audit" class="view">
        <div class="header"><h1 class="title">Audit Log</h1></div>
        <div class="card"><table class="table"><thead><tr><th>Date</th><th>User</th><th>Action</th><th>Details</th></tr></thead><tbody id="audit-log"></tbody></table></div>
      </div>
      <div id="view-reports" class="view">
        <div class="header"><h1 class="title">Compliance Reports</h1></div>
        <div class="stats"><div class="stat-card"><div class="stat-label">Compliance Rate</div><div class="stat-value" style="color:var(--success)">94%</div></div><div class="stat-card"><div class="stat-label">Licenses Tracked</div><div class="stat-value">47</div></div><div class="stat-card"><div class="stat-label">Renewals This Month</div><div class="stat-value">5</div></div><div class="stat-card"><div class="stat-label">Avg Days to Renew</div><div class="stat-value">12</div></div></div>
      </div>
    </main>
  </div>
  <div class="modal-overlay" id="modal">
    <div class="modal">
      <div class="modal-header"><h2 class="modal-title">Add License</h2><button class="close-btn" onclick="closeModal()">&times;</button></div>
      <div class="form-group"><label class="form-label">Employee</label><select class="form-select" id="lic-employee"></select></div>
      <div class="form-group"><label class="form-label">License Type</label><select class="form-select" id="lic-type"><option>Professional License</option><option>Driver's License</option><option>Safety Certification</option><option>Medical Certification</option><option>Industry Certification</option></select></div>
      <div class="form-group"><label class="form-label">License Number</label><input type="text" class="form-input" id="lic-number" placeholder="License #"></div>
      <div class="form-row"><div class="form-group"><label class="form-label">Issue Date</label><input type="date" class="form-input" id="lic-issue"></div><div class="form-group"><label class="form-label">Expiry Date</label><input type="date" class="form-input" id="lic-expiry"></div></div>
      <div style="display:flex;gap:12px;margin-top:16px"><button class="btn btn-secondary" onclick="closeModal()">Cancel</button><button class="btn btn-primary" onclick="saveLicense()">Add License</button></div>
    </div>
  </div>
  <script>
    let employees=[{id:1,name:'John Smith',dept:'Operations'},{id:2,name:'Sarah Johnson',dept:'Sales'},{id:3,name:'Mike Chen',dept:'Field'},{id:4,name:'Lisa Wong',dept:'Admin'}];
    let licenses=[
      {id:1,empId:1,type:'Professional License',number:'PL-12345',issue:'2024-01-15',expiry:'2026-01-15',status:'valid'},
      {id:2,empId:2,type:'Driver\'s License',number:'DL-98765',issue:'2023-06-01',expiry:'2026-01-20',status:'expiring'},
      {id:3,empId:3,type:'Safety Certification',number:'SC-11111',issue:'2024-03-01',expiry:'2025-12-15',status:'expired'},
      {id:4,empId:1,type:'Medical Certification',number:'MC-22222',issue:'2024-06-01',expiry:'2026-06-01',status:'valid'},
      {id:5,empId:4,type:'Industry Certification',number:'IC-33333',issue:'2024-02-01',expiry:'2026-02-10',status:'expiring'},
    ];
    let nextLicId=6;
    let auditLog=[{date:'Jan 3, 2026',user:'Admin',action:'Added License',details:'PL-12345 for John Smith'},{date:'Jan 2, 2026',user:'Admin',action:'Renewal Alert Sent',details:'DL-98765 expiring in 30 days'},{date:'Jan 1, 2026',user:'System',action:'Status Updated',details:'SC-11111 marked as expired'}];
    
    function getEmp(id){return employees.find(e=>e.id===id)}
    function getStatus(exp){const d=(new Date(exp)-new Date())/(1000*60*60*24);return d<0?'expired':d<30?'expiring':'valid';}
    
    function showView(v){document.querySelectorAll('.view').forEach(x=>x.classList.remove('active'));document.getElementById('view-'+v).classList.add('active');document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));event.target.classList.add('active');render();}
    
    function render(){
      licenses.forEach(l=>l.status=getStatus(l.expiry));
      const valid=licenses.filter(l=>l.status==='valid').length;
      const expiring=licenses.filter(l=>l.status==='expiring').length;
      const expired=licenses.filter(l=>l.status==='expired').length;
      document.getElementById('stat-total').textContent=licenses.length;
      document.getElementById('stat-valid').textContent=valid;
      document.getElementById('stat-expiring').textContent=expiring;
      document.getElementById('stat-expired').textContent=expired;
      
      document.getElementById('expiring-list').innerHTML=licenses.filter(l=>l.status==='expiring'||l.status==='expired').map(l=>`<div class="alert-card alert-${l.status==='expired'?'danger':'warning'}"><div style="flex:1"><strong>${getEmp(l.empId)?.name}</strong> - ${l.type}<br><small>${l.number} expires ${l.expiry}</small></div><button class="btn btn-sm btn-primary" onclick="renewLicense(${l.id})">Renew</button></div>`).join('')||'<p style="color:var(--muted)">No upcoming expirations</p>';
      
      document.getElementById('recent-licenses').innerHTML=licenses.slice(0,5).map(l=>`<tr><td>${getEmp(l.empId)?.name}</td><td>${l.type}</td><td>${l.expiry}</td><td><span class="badge badge-${l.status}">${l.status}</span></td></tr>`).join('');
      document.getElementById('all-licenses').innerHTML=licenses.map(l=>`<tr><td>${getEmp(l.empId)?.name}</td><td>${l.type}</td><td>${l.number}</td><td>${l.issue}</td><td>${l.expiry}</td><td><span class="badge badge-${l.status}">${l.status}</span></td><td><button class="btn btn-sm btn-secondary" onclick="editLicense(${l.id})">Edit</button></td></tr>`).join('');
      document.getElementById('all-employees').innerHTML=employees.map(e=>{const lics=licenses.filter(l=>l.empId===e.id);const comp=lics.length?Math.round(lics.filter(l=>l.status==='valid').length/lics.length*100):100;return `<tr><td><strong>${e.name}</strong></td><td>${e.dept}</td><td>${lics.length}</td><td><span class="badge badge-${comp>=80?'valid':comp>=50?'expiring':'expired'}">${comp}%</span></td></tr>`;}).join('');
      document.getElementById('alerts-list').innerHTML=licenses.filter(l=>l.status!=='valid').map(l=>`<div class="alert-card alert-${l.status==='expired'?'danger':'warning'}"><div style="flex:1"><strong>${l.status==='expired'?'EXPIRED':'EXPIRING SOON'}</strong>: ${getEmp(l.empId)?.name}'s ${l.type} (${l.number})<br><small>Expires: ${l.expiry}</small></div><button class="btn btn-sm btn-primary" onclick="renewLicense(${l.id})">Renew</button></div>`).join('')||'<p style="color:var(--muted);padding:20px">No alerts</p>';
      document.getElementById('audit-log').innerHTML=auditLog.map(a=>`<tr><td>${a.date}</td><td>${a.user}</td><td>${a.action}</td><td>${a.details}</td></tr>`).join('');
      document.getElementById('lic-employee').innerHTML=employees.map(e=>`<option value="${e.id}">${e.name}</option>`).join('');
    }
    
    function openModal(){document.getElementById('modal').classList.add('show');document.getElementById('lic-issue').value=new Date().toISOString().split('T')[0];}
    function closeModal(){document.getElementById('modal').classList.remove('show');}
    function saveLicense(){const num=document.getElementById('lic-number').value;if(!num){alert('Please enter license number');return;}licenses.unshift({id:nextLicId++,empId:parseInt(document.getElementById('lic-employee').value),type:document.getElementById('lic-type').value,number:num,issue:document.getElementById('lic-issue').value,expiry:document.getElementById('lic-expiry').value,status:'valid'});closeModal();render();document.getElementById('lic-number').value='';alert('License added!');}
    function editLicense(id){alert('Edit license #'+id+' (Demo)');}
    function renewLicense(id){const l=licenses.find(x=>x.id===id);if(l){const newExp=new Date();newExp.setFullYear(newExp.getFullYear()+1);l.expiry=newExp.toISOString().split('T')[0];l.status='valid';render();alert('License renewed for 1 year!');}}
    function addEmployee(){alert('Add employee (Demo)');}
    
    render();
  
// === LOCALSTORAGE PERSISTENCE (auto-injected) ===
(function(){
  const SK='compliancehq_pro_data';
  const vars=['employees,licenses,auditLog'].join(',').split(',').map(s=>s.trim()).filter(Boolean);
  
  function save(){
    try{
      const d={};
      vars.forEach(v=>{if(typeof window[v]!=='undefined')d[v]=window[v];});
      localStorage.setItem(SK,JSON.stringify(d));
    }catch(e){}
  }
  
  function load(){
    try{
      const s=localStorage.getItem(SK);
      if(s){
        const d=JSON.parse(s);
        vars.forEach(v=>{if(d[v])window[v]=d[v];});
        return true;
      }
    }catch(e){}
    return false;
  }
  
  load();
  setInterval(save,3000);
  window.addEventListener('beforeunload',save);
  document.addEventListener('click',function(){setTimeout(save,100);});
  
  // Export/Import
  window._exportData=function(){
    save();
    const d=localStorage.getItem(SK);
    const b=new Blob([d],{type:'application/json'});
    const a=document.createElement('a');
    a.href=URL.createObjectURL(b);
    a.download='compliancehq_pro-backup.json';
    a.click();
  };
  window._importData=function(f){
    const r=new FileReader();
    r.onload=function(e){
      try{localStorage.setItem(SK,e.target.result);location.reload();}catch(err){alert('Import failed');}
    };
    r.readAsText(f);
  };
})();
// === END PERSISTENCE ===
</script>
<footer style="text-align:center;padding:2rem;color:#64748b;border-top:1px solid #e2e8f0"><p>¬© 2026 BuyAppsOnce. Professional software without subscriptions.</p></footer>
</body>
</html>
