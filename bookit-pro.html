<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BookIt Pro - Multi-User Appointment Scheduling</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg:#f8fafc;--card:#fff;--border:#e2e8f0;--text:#0f172a;--muted:#64748b;--primary:#3b82f6;--success:#22c55e;--warning:#f59e0b;--purple:#8b5cf6}
    body{font-family:'Plus Jakarta Sans',sans-serif;background:var(--bg);color:var(--text)}
    .app{display:flex;min-height:100vh}
    .sidebar{width:220px;background:var(--card);border-right:1px solid var(--border);padding:20px;position:fixed;height:100vh}
    .logo{display:flex;align-items:center;gap:10px;margin-bottom:24px}
    .logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--primary),var(--purple));border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px}
    .logo-text{font-weight:700;font-size:18px}
    .pro-badge{background:var(--primary);color:white;font-size:10px;padding:2px 6px;border-radius:4px;margin-left:4px}
    .nav-item{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:8px;cursor:pointer;color:var(--muted);margin-bottom:4px;font-size:14px}
    .nav-item:hover,.nav-item.active{background:rgba(59,130,246,.1);color:var(--primary)}
    .main{flex:1;margin-left:220px;padding:24px}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .title{font-size:22px;font-weight:700}
    .btn{padding:10px 18px;border-radius:8px;font-weight:600;cursor:pointer;border:none;font-family:inherit;font-size:14px}
    .btn-primary{background:var(--primary);color:white}
    .btn-secondary{background:white;border:1px solid var(--border)}
    .btn-sm{padding:6px 12px;font-size:12px}
    .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:20px}
    .stat-card{background:var(--card);border-radius:12px;padding:16px;border:1px solid var(--border)}
    .stat-label{font-size:11px;color:var(--muted);text-transform:uppercase;margin-bottom:6px}
    .stat-value{font-size:24px;font-weight:700}
    .card{background:var(--card);border-radius:12px;border:1px solid var(--border);overflow:hidden;margin-bottom:20px}
    .card-header{padding:14px 18px;border-bottom:1px solid var(--border);font-weight:600;display:flex;justify-content:space-between;align-items:center}
    .view{display:none}.view.active{display:block}
    .calendar-grid{display:grid;grid-template-columns:80px repeat(7,1fr);border:1px solid var(--border);border-radius:8px;overflow:hidden}
    .cal-header{background:var(--bg);padding:12px;text-align:center;font-weight:600;font-size:13px;border-bottom:1px solid var(--border)}
    .cal-time{background:var(--bg);padding:8px;font-size:12px;color:var(--muted);border-right:1px solid var(--border);border-bottom:1px solid var(--border)}
    .cal-cell{border-right:1px solid var(--border);border-bottom:1px solid var(--border);min-height:60px;padding:4px;cursor:pointer}
    .cal-cell:hover{background:rgba(59,130,246,.05)}
    .appt{background:rgba(59,130,246,.15);border-left:3px solid var(--primary);padding:4px 8px;border-radius:0 4px 4px 0;font-size:11px;margin-bottom:2px;cursor:pointer}
    .appt:hover{background:rgba(59,130,246,.25)}
    .team-list{padding:16px}
    .team-member{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg);border-radius:8px;margin-bottom:8px}
    .avatar{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:600}
    .badge{padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600}
    .badge-available{background:rgba(34,197,94,.15);color:var(--success)}
    .badge-busy{background:rgba(239,68,68,.15);color:#ef4444}
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:100}
    .modal-overlay.show{display:flex}
    .modal{background:var(--card);border-radius:16px;padding:24px;width:100%;max-width:500px}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .modal-title{font-size:18px;font-weight:700}
    .close-btn{background:none;border:none;font-size:24px;cursor:pointer;color:var(--muted)}
    .form-group{margin-bottom:14px}
    .form-label{display:block;font-size:13px;font-weight:500;margin-bottom:6px}
    .form-input,.form-select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--border);font-size:14px;font-family:inherit}
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:900px){.stats{grid-template-columns:repeat(2,1fr)}.calendar-grid{font-size:11px}}
    @media(max-width:768px){.sidebar{display:none}.main{margin-left:0}}
  </style>
</head>
<body>
  <div class="app">
    <nav class="sidebar">
      <div class="logo"><div class="logo-icon">üóìÔ∏è</div><span class="logo-text">BookIt <span class="pro-badge">PRO</span></span></div>
      <div class="nav-item active" onclick="showView('calendar')">üìÖ Calendar</div>
      <div class="nav-item" onclick="showView('appointments')">üìã Appointments</div>
      <div class="nav-item" onclick="showView('team')">üë• Team</div>
      <div class="nav-item" onclick="showView('clients')">üßë‚Äçüíº Clients</div>
      <div class="nav-item" onclick="showView('services')">üîß Services</div>
      <div class="nav-item" onclick="showView('settings')">‚öôÔ∏è Settings</div>
    </nav>
    <main class="main">
      <!-- Calendar View -->
      <div id="view-calendar" class="view active">
        <div class="header"><h1 class="title">Team Calendar</h1><button class="btn btn-primary" onclick="openModal()">+ New Appointment</button></div>
        <div class="stats">
          <div class="stat-card"><div class="stat-label">Today</div><div class="stat-value" id="stat-today">0</div></div>
          <div class="stat-card"><div class="stat-label">This Week</div><div class="stat-value" style="color:var(--primary)" id="stat-week">0</div></div>
          <div class="stat-card"><div class="stat-label">Team Members</div><div class="stat-value" id="stat-team">0</div></div>
          <div class="stat-card"><div class="stat-label">Utilization</div><div class="stat-value" style="color:var(--success)">68%</div></div>
        </div>
        <div class="card">
          <div class="card-header"><span id="week-label">Jan 5 - Jan 11, 2026</span><div><button class="btn btn-sm btn-secondary" onclick="prevWeek()">‚Üê</button> <button class="btn btn-sm btn-secondary" onclick="nextWeek()">‚Üí</button></div></div>
          <div class="calendar-grid" id="calendar-grid"></div>
        </div>
      </div>
      <!-- Appointments View -->
      <div id="view-appointments" class="view">
        <div class="header"><h1 class="title">All Appointments</h1></div>
        <div class="card">
          <table style="width:100%;border-collapse:collapse"><thead><tr style="background:var(--bg)"><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Client</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Service</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Staff</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Date/Time</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Actions</th></tr></thead><tbody id="appt-list"></tbody></table>
        </div>
      </div>
      <!-- Team View -->
      <div id="view-team" class="view">
        <div class="header"><h1 class="title">Team Members</h1><button class="btn btn-primary" onclick="addTeamMember()">+ Add Member</button></div>
        <div class="card"><div class="team-list" id="team-list"></div></div>
      </div>
      <!-- Clients View -->
      <div id="view-clients" class="view">
        <div class="header"><h1 class="title">Clients</h1><button class="btn btn-primary" onclick="addClient()">+ Add Client</button></div>
        <div class="card">
          <table style="width:100%;border-collapse:collapse"><thead><tr style="background:var(--bg)"><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Name</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Email</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Phone</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Appointments</th></tr></thead><tbody id="client-list"></tbody></table>
        </div>
      </div>
      <!-- Services View -->
      <div id="view-services" class="view">
        <div class="header"><h1 class="title">Services</h1><button class="btn btn-primary" onclick="addService()">+ Add Service</button></div>
        <div class="card">
          <table style="width:100%;border-collapse:collapse"><thead><tr style="background:var(--bg)"><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Service</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Duration</th><th style="padding:12px;text-align:left;font-size:11px;text-transform:uppercase;color:var(--muted)">Price</th></tr></thead><tbody id="service-list"></tbody></table>
        </div>
      </div>
      <!-- Settings View -->
      <div id="view-settings" class="view">
        <div class="header"><h1 class="title">Settings</h1></div>
        <div class="card" style="padding:20px">
          <h3 style="margin-bottom:16px">Business Hours</h3>
          <div class="form-row"><div class="form-group"><label class="form-label">Opens</label><input type="time" class="form-input" value="09:00"></div><div class="form-group"><label class="form-label">Closes</label><input type="time" class="form-input" value="17:00"></div></div>
          <h3 style="margin:20px 0 16px">Booking Options</h3>
          <div class="form-group"><label><input type="checkbox" checked> Allow online booking</label></div>
          <div class="form-group"><label><input type="checkbox" checked> Send email confirmations</label></div>
          <div class="form-group"><label><input type="checkbox" checked> Send SMS reminders</label></div>
        </div>
      </div>
    </main>
  </div>
  <!-- Modal -->
  <div class="modal-overlay" id="modal">
    <div class="modal">
      <div class="modal-header"><h2 class="modal-title">New Appointment</h2><button class="close-btn" onclick="closeModal()">&times;</button></div>
      <div class="form-group"><label class="form-label">Client</label><select class="form-select" id="appt-client"></select></div>
      <div class="form-group"><label class="form-label">Service</label><select class="form-select" id="appt-service"></select></div>
      <div class="form-group"><label class="form-label">Team Member</label><select class="form-select" id="appt-staff"></select></div>
      <div class="form-row">
        <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="appt-date"></div>
        <div class="form-group"><label class="form-label">Time</label><input type="time" class="form-input" id="appt-time" value="09:00"></div>
      </div>
      <div style="display:flex;gap:12px;margin-top:16px"><button class="btn btn-secondary" onclick="closeModal()">Cancel</button><button class="btn btn-primary" onclick="saveAppt()">Book Appointment</button></div>
    </div>
  </div>
  <script>
    let team=[{id:1,name:'Jane Doe',color:'#3b82f6',status:'available'},{id:2,name:'Mike Kim',color:'#8b5cf6',status:'busy'},{id:3,name:'Sarah J.',color:'#22c55e',status:'available'}];
    let clients=[{id:1,name:'John Smith',email:'john@email.com',phone:'555-1234'},{id:2,name:'Alice Brown',email:'alice@email.com',phone:'555-2345'},{id:3,name:'Bob Wilson',email:'bob@email.com',phone:'555-3456'}];
    let services=[{id:1,name:'Consultation',duration:30,price:50},{id:2,name:'Full Session',duration:60,price:100},{id:3,name:'Follow-up',duration:15,price:25}];
    let appointments=[
      {id:1,clientId:1,serviceId:2,staffId:1,date:'2026-01-06',time:'09:00'},
      {id:2,clientId:2,serviceId:1,staffId:2,date:'2026-01-06',time:'14:00'},
      {id:3,clientId:3,serviceId:2,staffId:1,date:'2026-01-07',time:'10:00'},
      {id:4,clientId:1,serviceId:3,staffId:3,date:'2026-01-08',time:'11:00'},
    ];
    let nextApptId=5;
    const days=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    const times=['9:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00'];
    
    function showView(v){
      document.querySelectorAll('.view').forEach(x=>x.classList.remove('active'));
      document.getElementById('view-'+v).classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
      event.target.classList.add('active');
      render();
    }
    
    function render(){
      document.getElementById('stat-today').textContent=appointments.filter(a=>a.date==='2026-01-06').length;
      document.getElementById('stat-week').textContent=appointments.length;
      document.getElementById('stat-team').textContent=team.length;
      
      // Calendar
      let html='<div class="cal-header"></div>';
      for(let d=0;d<7;d++){html+=`<div class="cal-header">${days[(d+1)%7]} ${6+d}</div>`;}
      times.forEach(t=>{
        html+=`<div class="cal-time">${t}</div>`;
        for(let d=0;d<7;d++){
          const date=`2026-01-0${6+d}`;
          const appts=appointments.filter(a=>a.date===date&&a.time===t+':00');
          html+=`<div class="cal-cell" onclick="bookSlot('${date}','${t}')">`;
          appts.forEach(a=>{
            const c=clients.find(x=>x.id===a.clientId);
            const s=team.find(x=>x.id===a.staffId);
            html+=`<div class="appt" style="border-color:${s?.color||'#3b82f6'}" onclick="event.stopPropagation();editAppt(${a.id})">${c?.name||'Client'}</div>`;
          });
          html+=`</div>`;
        }
      });
      document.getElementById('calendar-grid').innerHTML=html;
      
      // Appointments list
      document.getElementById('appt-list').innerHTML=appointments.map(a=>{
        const c=clients.find(x=>x.id===a.clientId);
        const sv=services.find(x=>x.id===a.serviceId);
        const st=team.find(x=>x.id===a.staffId);
        return `<tr style="border-bottom:1px solid var(--border)"><td style="padding:12px"><strong>${c?.name||'-'}</strong></td><td style="padding:12px">${sv?.name||'-'}</td><td style="padding:12px">${st?.name||'-'}</td><td style="padding:12px">${a.date} ${a.time}</td><td style="padding:12px"><button class="btn btn-sm btn-secondary" onclick="editAppt(${a.id})">Edit</button></td></tr>`;
      }).join('');
      
      // Team
      document.getElementById('team-list').innerHTML=team.map(t=>`<div class="team-member"><div class="avatar" style="background:${t.color}">${t.name.split(' ').map(n=>n[0]).join('')}</div><div style="flex:1"><strong>${t.name}</strong></div><span class="badge badge-${t.status}">${t.status}</span></div>`).join('');
      
      // Clients
      document.getElementById('client-list').innerHTML=clients.map(c=>{
        const count=appointments.filter(a=>a.clientId===c.id).length;
        return `<tr style="border-bottom:1px solid var(--border)"><td style="padding:12px"><strong>${c.name}</strong></td><td style="padding:12px">${c.email}</td><td style="padding:12px">${c.phone}</td><td style="padding:12px">${count}</td></tr>`;
      }).join('');
      
      // Services
      document.getElementById('service-list').innerHTML=services.map(s=>`<tr style="border-bottom:1px solid var(--border)"><td style="padding:12px"><strong>${s.name}</strong></td><td style="padding:12px">${s.duration} min</td><td style="padding:12px">$${s.price}</td></tr>`).join('');
      
      // Dropdowns
      document.getElementById('appt-client').innerHTML=clients.map(c=>`<option value="${c.id}">${c.name}</option>`).join('');
      document.getElementById('appt-service').innerHTML=services.map(s=>`<option value="${s.id}">${s.name} (${s.duration}min)</option>`).join('');
      document.getElementById('appt-staff').innerHTML=team.map(t=>`<option value="${t.id}">${t.name}</option>`).join('');
    }
    
    function openModal(){document.getElementById('modal').classList.add('show');document.getElementById('appt-date').value='2026-01-06';}
    function closeModal(){document.getElementById('modal').classList.remove('show');}
    function bookSlot(date,time){document.getElementById('appt-date').value=date;document.getElementById('appt-time').value=time;openModal();}
    function saveAppt(){
      appointments.push({id:nextApptId++,clientId:parseInt(document.getElementById('appt-client').value),serviceId:parseInt(document.getElementById('appt-service').value),staffId:parseInt(document.getElementById('appt-staff').value),date:document.getElementById('appt-date').value,time:document.getElementById('appt-time').value});
      closeModal();render();alert('Appointment booked!');
    }
    function editAppt(id){alert('Edit appointment #'+id+' (Demo)');}
    function addTeamMember(){alert('Add team member (Demo)');}
    function addClient(){alert('Add client (Demo)');}
    function addService(){alert('Add service (Demo)');}
    function prevWeek(){alert('Previous week (Demo)');}
    function nextWeek(){alert('Next week (Demo)');}
    
    render();
  
// === LOCALSTORAGE PERSISTENCE (auto-injected) ===
(function(){
  const SK='bookit_pro_data';
  const vars=['team,clients,services,appointments'].join(',').split(',').map(s=>s.trim()).filter(Boolean);
  
  function save(){
    try{
      const d={};
      vars.forEach(v=>{if(typeof window[v]!=='undefined')d[v]=window[v];});
      localStorage.setItem(SK,JSON.stringify(d));
    }catch(e){}
  }
  
  function load(){
    try{
      const s=localStorage.getItem(SK);
      if(s){
        const d=JSON.parse(s);
        vars.forEach(v=>{if(d[v])window[v]=d[v];});
        return true;
      }
    }catch(e){}
    return false;
  }
  
  load();
  setInterval(save,3000);
  window.addEventListener('beforeunload',save);
  document.addEventListener('click',function(){setTimeout(save,100);});
  
  // Export/Import
  window._exportData=function(){
    save();
    const d=localStorage.getItem(SK);
    const b=new Blob([d],{type:'application/json'});
    const a=document.createElement('a');
    a.href=URL.createObjectURL(b);
    a.download='bookit_pro-backup.json';
    a.click();
  };
  window._importData=function(f){
    const r=new FileReader();
    r.onload=function(e){
      try{localStorage.setItem(SK,e.target.result);location.reload();}catch(err){alert('Import failed');}
    };
    r.readAsText(f);
  };
})();
// === END PERSISTENCE ===
</script>
<footer style="text-align:center;padding:2rem;color:#64748b;border-top:1px solid #e2e8f0"><p>¬© 2026 BuyAppsOnce. Professional software without subscriptions.</p></footer>
</body>
</html>
