<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CrewClock Pro - Employee Time Clock with GPS</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root { --bg: #f8fafc; --card: #ffffff; --border: #e2e8f0; --text: #0f172a; --muted: #64748b; --primary: #0891b2; --success: #22c55e; --warning: #f59e0b; --danger: #ef4444; }
    body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
    .app { display: flex; min-height: 100vh; }
    .sidebar { width: 240px; background: var(--card); border-right: 1px solid var(--border); padding: 20px; position: fixed; height: 100vh; overflow-y: auto; }
    .logo { display: flex; align-items: center; gap: 10px; margin-bottom: 30px; }
    .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), #06b6d4); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
    .logo-text { font-weight: 700; font-size: 18px; }
    .pro-badge { background: var(--primary); color: white; font-size: 10px; padding: 2px 6px; border-radius: 4px; margin-left: 4px; }
    .nav-item { display: flex; align-items: center; gap: 10px; padding: 12px 16px; border-radius: 8px; cursor: pointer; color: var(--muted); margin-bottom: 4px; transition: all 0.2s; }
    .nav-item:hover, .nav-item.active { background: rgba(8, 145, 178, 0.1); color: var(--primary); }
    .main { flex: 1; margin-left: 240px; padding: 24px; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    .title { font-size: 24px; font-weight: 700; }
    .btn { padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; border: none; transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px; font-family: inherit; font-size: 14px; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { opacity: 0.9; }
    .btn-success { background: var(--success); color: white; }
    .btn-danger { background: var(--danger); color: white; }
    .btn-secondary { background: var(--card); color: var(--text); border: 1px solid var(--border); }
    .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
    .stat-card { background: var(--card); border-radius: 12px; padding: 20px; border: 1px solid var(--border); }
    .stat-label { font-size: 12px; color: var(--muted); text-transform: uppercase; margin-bottom: 8px; }
    .stat-value { font-size: 28px; font-weight: 700; }
    .stat-value.green { color: var(--success); }
    .stat-value.blue { color: var(--primary); }
    .card { background: var(--card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden; margin-bottom: 20px; }
    .card-header { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; font-weight: 600; }
    .table { width: 100%; border-collapse: collapse; }
    .table th, .table td { padding: 12px 16px; text-align: left; border-bottom: 1px solid var(--border); }
    .table th { background: var(--bg); font-weight: 600; font-size: 12px; text-transform: uppercase; color: var(--muted); }
    .table tr:hover { background: var(--bg); }
    .badge { padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 600; }
    .badge-success { background: rgba(34, 197, 94, 0.15); color: var(--success); }
    .badge-warning { background: rgba(245, 158, 11, 0.15); color: var(--warning); }
    .badge-muted { background: var(--bg); color: var(--muted); }
    .employee-row { display: flex; align-items: center; gap: 12px; }
    .avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px; }
    .gps-indicator { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--success); }
    .gps-indicator::before { content: ''; width: 8px; height: 8px; background: var(--success); border-radius: 50%; }
    .photo-thumb { width: 40px; height: 40px; border-radius: 8px; object-fit: cover; background: var(--bg); display: flex; align-items: center; justify-content: center; font-size: 18px; }
    .clock-panel { background: linear-gradient(135deg, var(--primary), #06b6d4); color: white; border-radius: 16px; padding: 32px; text-align: center; margin-bottom: 24px; }
    .clock-time { font-size: 64px; font-weight: 700; margin-bottom: 8px; }
    .clock-date { font-size: 18px; opacity: 0.9; margin-bottom: 24px; }
    .clock-actions { display: flex; gap: 16px; justify-content: center; }
    .clock-btn { padding: 16px 48px; border-radius: 12px; font-size: 18px; font-weight: 700; border: none; cursor: pointer; transition: all 0.2s; }
    .clock-in { background: white; color: var(--success); }
    .clock-out { background: rgba(255,255,255,0.2); color: white; border: 2px solid white; }
    .pin-input { display: flex; gap: 12px; justify-content: center; margin: 24px 0; }
    .pin-digit { width: 60px; height: 70px; border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; background: rgba(255,255,255,0.1); color: white; font-size: 32px; text-align: center; font-weight: 700; }
    .pin-digit:focus { outline: none; border-color: white; background: rgba(255,255,255,0.2); }
    .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; max-width: 280px; margin: 0 auto; }
    .keypad-btn { padding: 20px; font-size: 24px; font-weight: 600; border: none; border-radius: 12px; background: rgba(255,255,255,0.15); color: white; cursor: pointer; transition: all 0.2s; }
    .keypad-btn:hover { background: rgba(255,255,255,0.25); }
    .keypad-btn.clear { background: rgba(239, 68, 68, 0.3); }
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 100; }
    .modal-overlay.show { display: flex; }
    .modal { background: var(--card); border-radius: 16px; padding: 24px; width: 100%; max-width: 500px; max-height: 90vh; overflow-y: auto; }
    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .modal-title { font-size: 20px; font-weight: 700; }
    .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--muted); }
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; font-size: 14px; font-weight: 500; margin-bottom: 6px; }
    .form-input, .form-select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); font-size: 14px; font-family: inherit; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .geofence-status { padding: 12px; border-radius: 8px; margin-top: 16px; display: flex; align-items: center; gap: 10px; }
    .geofence-status.valid { background: rgba(34, 197, 94, 0.1); color: var(--success); }
    .geofence-status.invalid { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
    .tabs { display: flex; gap: 8px; margin-bottom: 20px; }
    .tab { padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 500; border: 1px solid var(--border); background: white; }
    .tab.active { background: var(--primary); color: white; border-color: var(--primary); }
    @media (max-width: 1024px) { .stats { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 768px) { .sidebar { display: none; } .main { margin-left: 0; } .stats { grid-template-columns: 1fr; } .clock-time { font-size: 48px; } }
  </style>
</head>
<body>
  <div class="app">
    <nav class="sidebar">
      <div class="logo">
        <div class="logo-icon">‚è±Ô∏è</div>
        <span class="logo-text">CrewClock <span class="pro-badge">PRO</span></span>
      </div>
      <div class="nav-item active" onclick="showView('clock')">üïê Time Clock</div>
      <div class="nav-item" onclick="showView('employees')">üë• Employees</div>
      <div class="nav-item" onclick="showView('timesheets')">üìã Timesheets</div>
      <div class="nav-item" onclick="showView('locations')">üìç Locations</div>
      <div class="nav-item" onclick="showView('photos')">üì∑ Photo Log</div>
      <div class="nav-item" onclick="showView('reports')">üìä Reports</div>
      <div class="nav-item" onclick="showView('settings')">‚öôÔ∏è Settings</div>
    </nav>
    
    <main class="main">
      <!-- Clock View -->
      <div id="view-clock">
        <div class="header">
          <h1 class="title">Time Clock</h1>
          <div class="gps-indicator">GPS Active ‚Ä¢ Hartford, CT</div>
        </div>
        
        <div class="clock-panel">
          <div class="clock-time" id="clock-display">00:00:00</div>
          <div class="clock-date" id="date-display">Saturday, January 3, 2026</div>
          
          <div style="margin-bottom: 20px; font-size: 14px; opacity: 0.8;">Enter your 4-digit PIN</div>
          <div class="pin-input">
            <input type="password" class="pin-digit" maxlength="1" id="pin1" oninput="handlePin(this, 'pin2')">
            <input type="password" class="pin-digit" maxlength="1" id="pin2" oninput="handlePin(this, 'pin3')">
            <input type="password" class="pin-digit" maxlength="1" id="pin3" oninput="handlePin(this, 'pin4')">
            <input type="password" class="pin-digit" maxlength="1" id="pin4" oninput="handlePin(this, null)">
          </div>
          
          <div class="keypad">
            <button class="keypad-btn" onclick="enterDigit('1')">1</button>
            <button class="keypad-btn" onclick="enterDigit('2')">2</button>
            <button class="keypad-btn" onclick="enterDigit('3')">3</button>
            <button class="keypad-btn" onclick="enterDigit('4')">4</button>
            <button class="keypad-btn" onclick="enterDigit('5')">5</button>
            <button class="keypad-btn" onclick="enterDigit('6')">6</button>
            <button class="keypad-btn" onclick="enterDigit('7')">7</button>
            <button class="keypad-btn" onclick="enterDigit('8')">8</button>
            <button class="keypad-btn" onclick="enterDigit('9')">9</button>
            <button class="keypad-btn clear" onclick="clearPin()">C</button>
            <button class="keypad-btn" onclick="enterDigit('0')">0</button>
            <button class="keypad-btn" onclick="submitPin()">‚úì</button>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <span>Currently Clocked In</span>
            <span id="clocked-count">3 employees</span>
          </div>
          <table class="table">
            <thead>
              <tr><th>Employee</th><th>Clock In</th><th>Job</th><th>Location</th><th>Photo</th></tr>
            </thead>
            <tbody id="clocked-in-table">
              <tr>
                <td><div class="employee-row"><div class="avatar">MK</div><div>Mike Kim</div></div></td>
                <td>7:02 AM</td>
                <td>Warehouse</td>
                <td><span class="gps-indicator">Main Office</span></td>
                <td><div class="photo-thumb">üì∑</div></td>
              </tr>
              <tr>
                <td><div class="employee-row"><div class="avatar">SJ</div><div>Sarah Johnson</div></div></td>
                <td>7:45 AM</td>
                <td>Delivery</td>
                <td><span class="gps-indicator">Route 1</span></td>
                <td><div class="photo-thumb">üì∑</div></td>
              </tr>
              <tr>
                <td><div class="employee-row"><div class="avatar">JD</div><div>Jake Davis</div></div></td>
                <td>8:00 AM</td>
                <td>Office</td>
                <td><span class="gps-indicator">Main Office</span></td>
                <td><div class="photo-thumb">üì∑</div></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Employees View -->
      <div id="view-employees" style="display:none;">
        <div class="header">
          <h1 class="title">Employees</h1>
          <button class="btn btn-primary" onclick="openModal('employee-modal')">+ Add Employee</button>
        </div>
        
        <div class="stats">
          <div class="stat-card"><div class="stat-label">Total Employees</div><div class="stat-value">12</div></div>
          <div class="stat-card"><div class="stat-label">Active Today</div><div class="stat-value green">8</div></div>
          <div class="stat-card"><div class="stat-label">Hours This Week</div><div class="stat-value blue">342</div></div>
          <div class="stat-card"><div class="stat-label">Overtime Hours</div><div class="stat-value" style="color:var(--warning)">18</div></div>
        </div>
        
        <div class="card">
          <table class="table" id="employees-table">
            <thead>
              <tr><th>Employee</th><th>PIN</th><th>Department</th><th>Pay Rate</th><th>Status</th><th>Actions</th></tr>
            </thead>
            <tbody id="employees-body"></tbody>
          </table>
        </div>
      </div>
      
      <!-- Timesheets View -->
      <div id="view-timesheets" style="display:none;">
        <div class="header">
          <h1 class="title">Timesheets</h1>
          <button class="btn btn-secondary">Export CSV</button>
        </div>
        
        <div class="tabs">
          <div class="tab active">This Week</div>
          <div class="tab">Last Week</div>
          <div class="tab">Custom Range</div>
        </div>
        
        <div class="card">
          <table class="table">
            <thead>
              <tr><th>Employee</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th><th>Sun</th><th>Total</th></tr>
            </thead>
            <tbody>
              <tr><td><div class="employee-row"><div class="avatar">MK</div><div>Mike Kim</div></div></td><td>8.0</td><td>8.5</td><td>8.0</td><td>9.0</td><td>8.0</td><td>-</td><td>-</td><td><strong>41.5</strong></td></tr>
              <tr><td><div class="employee-row"><div class="avatar">SJ</div><div>Sarah Johnson</div></div></td><td>8.0</td><td>8.0</td><td>7.5</td><td>8.0</td><td>8.0</td><td>4.0</td><td>-</td><td><strong>43.5</strong></td></tr>
              <tr><td><div class="employee-row"><div class="avatar">JD</div><div>Jake Davis</div></div></td><td>8.0</td><td>8.0</td><td>8.0</td><td>8.0</td><td>8.0</td><td>-</td><td>-</td><td><strong>40.0</strong></td></tr>
              <tr><td><div class="employee-row"><div class="avatar">AL</div><div>Amy Lee</div></div></td><td>6.0</td><td>6.0</td><td>6.0</td><td>6.0</td><td>6.0</td><td>-</td><td>-</td><td><strong>30.0</strong></td></tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Locations View -->
      <div id="view-locations" style="display:none;">
        <div class="header">
          <h1 class="title">Geofence Locations</h1>
          <button class="btn btn-primary" onclick="openModal('location-modal')">+ Add Location</button>
        </div>
        
        <div class="card">
          <table class="table" id="locations-table">
            <thead>
              <tr><th>Location Name</th><th>Address</th><th>Radius</th><th>Status</th><th>Actions</th></tr>
            </thead>
            <tbody id="locations-body"></tbody>
          </table>
        </div>
      </div>
      
      <!-- Photos View -->
      <div id="view-photos" style="display:none;">
        <div class="header">
          <h1 class="title">Photo Clock-In Log</h1>
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
          <div class="card" style="padding: 16px; text-align: center;">
            <div style="width: 100%; height: 150px; background: var(--bg); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 48px; margin-bottom: 12px;">üì∑</div>
            <div style="font-weight: 600;">Mike Kim</div>
            <div style="font-size: 12px; color: var(--muted);">Clock In ‚Ä¢ 7:02 AM</div>
            <div style="font-size: 11px; color: var(--success); margin-top: 4px;">üìç Main Office</div>
          </div>
          <div class="card" style="padding: 16px; text-align: center;">
            <div style="width: 100%; height: 150px; background: var(--bg); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 48px; margin-bottom: 12px;">üì∑</div>
            <div style="font-weight: 600;">Sarah Johnson</div>
            <div style="font-size: 12px; color: var(--muted);">Clock In ‚Ä¢ 7:45 AM</div>
            <div style="font-size: 11px; color: var(--success); margin-top: 4px;">üìç Route 1</div>
          </div>
          <div class="card" style="padding: 16px; text-align: center;">
            <div style="width: 100%; height: 150px; background: var(--bg); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 48px; margin-bottom: 12px;">üì∑</div>
            <div style="font-weight: 600;">Jake Davis</div>
            <div style="font-size: 12px; color: var(--muted);">Clock In ‚Ä¢ 8:00 AM</div>
            <div style="font-size: 11px; color: var(--success); margin-top: 4px;">üìç Main Office</div>
          </div>
        </div>
      </div>
      
      <!-- Reports & Settings placeholders -->
      <div id="view-reports" style="display:none;">
        <div class="header"><h1 class="title">Reports</h1></div>
        <div class="stats">
          <div class="stat-card"><div class="stat-label">Total Hours (Week)</div><div class="stat-value">342</div></div>
          <div class="stat-card"><div class="stat-label">Labor Cost</div><div class="stat-value blue">$6,840</div></div>
          <div class="stat-card"><div class="stat-label">Overtime Cost</div><div class="stat-value" style="color:var(--warning)">$540</div></div>
          <div class="stat-card"><div class="stat-label">GPS Violations</div><div class="stat-value green">0</div></div>
        </div>
      </div>
      
      <div id="view-settings" style="display:none;">
        <div class="header"><h1 class="title">Settings</h1></div>
        <div class="card" style="padding: 20px;">
          <h3 style="margin-bottom: 16px;">Pro Features</h3>
          <div class="form-group"><label><input type="checkbox" checked> Require GPS for clock-in</label></div>
          <div class="form-group"><label><input type="checkbox" checked> Require photo for clock-in</label></div>
          <div class="form-group"><label><input type="checkbox" checked> Enforce geofencing</label></div>
          <div class="form-group"><label><input type="checkbox"> Allow manual time edits</label></div>
          <div class="form-group"><label><input type="checkbox" checked> Send overtime alerts</label></div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- Employee Modal -->
  <div class="modal-overlay" id="employee-modal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Add Employee</h2>
        <button class="close-btn" onclick="closeModal('employee-modal')">&times;</button>
      </div>
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input type="text" class="form-input" id="emp-name" placeholder="John Smith">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">PIN Code</label>
          <input type="text" class="form-input" id="emp-pin" placeholder="4 digits" maxlength="4">
        </div>
        <div class="form-group">
          <label class="form-label">Pay Rate</label>
          <input type="text" class="form-input" id="emp-rate" placeholder="$20.00">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Department</label>
        <select class="form-select" id="emp-dept">
          <option>Warehouse</option>
          <option>Delivery</option>
          <option>Office</option>
          <option>Field</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Assigned Location</label>
        <select class="form-select" id="emp-location">
          <option>Main Office</option>
          <option>Warehouse A</option>
          <option>Field (Any)</option>
        </select>
      </div>
      <div style="display: flex; gap: 12px; margin-top: 20px;">
        <button class="btn btn-secondary" onclick="closeModal('employee-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="saveEmployee()">Add Employee</button>
      </div>
    </div>
  </div>
  
  <!-- Location Modal -->
  <div class="modal-overlay" id="location-modal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Add Geofence Location</h2>
        <button class="close-btn" onclick="closeModal('location-modal')">&times;</button>
      </div>
      <div class="form-group">
        <label class="form-label">Location Name</label>
        <input type="text" class="form-input" id="loc-name" placeholder="Main Office">
      </div>
      <div class="form-group">
        <label class="form-label">Address</label>
        <input type="text" class="form-input" id="loc-address" placeholder="123 Main St, Hartford, CT">
      </div>
      <div class="form-group">
        <label class="form-label">Geofence Radius</label>
        <select class="form-select" id="loc-radius">
          <option>100 feet</option>
          <option selected>250 feet</option>
          <option>500 feet</option>
          <option>1000 feet</option>
        </select>
      </div>
      <div class="geofence-status valid">
        <span>üìç</span> GPS coordinates will be captured automatically
      </div>
      <div style="display: flex; gap: 12px; margin-top: 20px;">
        <button class="btn btn-secondary" onclick="closeModal('location-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="saveLocation()">Add Location</button>
      </div>
    </div>
  </div>
  
  <!-- Clock In/Out Modal -->
  <div class="modal-overlay" id="clock-modal">
    <div class="modal" style="text-align: center;">
      <div class="modal-header">
        <h2 class="modal-title" id="clock-modal-title">Clock In</h2>
        <button class="close-btn" onclick="closeModal('clock-modal')">&times;</button>
      </div>
      <div style="font-size: 48px; margin: 20px 0;">üì∑</div>
      <p style="color: var(--muted); margin-bottom: 20px;">Take a photo to confirm your identity</p>
      <div class="geofence-status valid" style="justify-content: center; margin-bottom: 20px;">
        <span>üìç</span> Location verified: Main Office
      </div>
      <div class="form-group">
        <label class="form-label">Select Job</label>
        <select class="form-select" id="clock-job">
          <option>Warehouse</option>
          <option>Delivery</option>
          <option>Office</option>
          <option>Field Work</option>
        </select>
      </div>
      <div style="display: flex; gap: 12px; margin-top: 20px; justify-content: center;">
        <button class="btn btn-secondary" onclick="closeModal('clock-modal')">Cancel</button>
        <button class="btn btn-success" onclick="confirmClock()">üì∑ Take Photo & Clock In</button>
      </div>
    </div>
  </div>

  <script>
    // Data
    let employees = [
      { id: 1, name: 'Mike Kim', pin: '1234', dept: 'Warehouse', rate: '$22.00', status: 'active' },
      { id: 2, name: 'Sarah Johnson', pin: '2345', dept: 'Delivery', rate: '$20.00', status: 'active' },
      { id: 3, name: 'Jake Davis', pin: '3456', dept: 'Office', rate: '$25.00', status: 'active' },
      { id: 4, name: 'Amy Lee', pin: '4567', dept: 'Warehouse', rate: '$18.00', status: 'active' },
    ];
    
    let locations = [
      { id: 1, name: 'Main Office', address: '123 Business Pkwy, Hartford, CT', radius: '250 feet', status: 'active' },
      { id: 2, name: 'Warehouse A', address: '456 Industrial Dr, Hartford, CT', radius: '500 feet', status: 'active' },
    ];
    
    let currentPin = '';
    const SK='crewclock_pro_data';
    function saveData(){try{localStorage.setItem(SK,JSON.stringify({employees,locations}));}catch(e){}}
    function loadData(){try{const s=localStorage.getItem(SK);if(s){const d=JSON.parse(s);if(d.employees)employees=d.employees;if(d.locations)locations=d.locations;}}catch(e){}}

    
    // Clock
    function updateClock() {
      const now = new Date();
      document.getElementById('clock-display').textContent = now.toLocaleTimeString('en-US', { hour12: false });
      document.getElementById('date-display').textContent = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    }
    setInterval(updateClock, 1000);
    updateClock();
    
    // PIN handling
    function handlePin(current, nextId) {
      if (current.value && nextId) {
        document.getElementById(nextId).focus();
      }
    }
    
    function enterDigit(d) {
      if (currentPin.length < 4) {
        currentPin += d;
        updatePinDisplay();
      }
    }
    
    function clearPin() {
      currentPin = '';
      updatePinDisplay();
    }
    
    function updatePinDisplay() {
      for (let i = 1; i <= 4; i++) {
        document.getElementById('pin' + i).value = currentPin[i-1] || '';
      }
    }
    
    function submitPin() {
      if (currentPin.length === 4) {
        const emp = employees.find(e => e.pin === currentPin);
        if (emp) {
          document.getElementById('clock-modal-title').textContent = 'Clock In - ' + emp.name;
          openModal('clock-modal');
        } else {
          alert('Invalid PIN. Please try again.');
        }
        clearPin();
      }
    }
    
    function confirmClock() {
      alert('‚úì Clocked in successfully!\n\nüì∑ Photo captured\nüìç Location: Main Office\n‚è∞ Time: ' + new Date().toLocaleTimeString());
      closeModal('clock-modal');
    }
    
    // Views
    function showView(view) {
      document.querySelectorAll('[id^="view-"]').forEach(v => v.style.display = 'none');
      document.getElementById('view-' + view).style.display = 'block';
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      event.target.classList.add('active');
      
      if (view === 'employees') renderEmployees();
      if (view === 'locations') renderLocations();
    }
    
    // Modals
    function openModal(id) { document.getElementById(id).classList.add('show'); }
    function closeModal(id) { document.getElementById(id).classList.remove('show'); }
    
    // Employees
    function renderEmployees() {
      const tbody = document.getElementById('employees-body');
      tbody.innerHTML = employees.map(e => `
        <tr>
          <td><div class="employee-row"><div class="avatar">${e.name.split(' ').map(n=>n[0]).join('')}</div><div>${e.name}</div></div></td>
          <td>****</td>
          <td>${e.dept}</td>
          <td>${e.rate}</td>
          <td><span class="badge badge-success">Active</span></td>
          <td><button class="btn btn-secondary" style="padding:6px 12px;font-size:12px" onclick="editEmployee(${e.id})">Edit</button></td>
        </tr>
      `).join('');
    }
    
    function saveEmployee() {
      const name = document.getElementById('emp-name').value;
      const pin = document.getElementById('emp-pin').value;
      const rate = document.getElementById('emp-rate').value;
      const dept = document.getElementById('emp-dept').value;
      
      if (name && pin) {
        employees.push({ id: Date.now(), name, pin, dept, rate: rate || '$20.00', status: 'active' });saveData();
        closeModal('employee-modal');
        renderEmployees();
        document.getElementById('emp-name').value = '';
        document.getElementById('emp-pin').value = '';
        document.getElementById('emp-rate').value = '';
      } else {
        alert('Please fill in name and PIN');
      }
    }
    
    function editEmployee(id) {
      const e=employees.find(x=>x.id===id);if(!e)return;const name=prompt('Employee name:',e.name);if(!name)return;const pin=prompt('PIN:',e.pin);const role=prompt('Role:',e.role);e.name=name;e.pin=pin;e.role=role;saveData();renderEmployees();
    }
    
    // Locations
    function renderLocations() {
      const tbody = document.getElementById('locations-body');
      tbody.innerHTML = locations.map(l => `
        <tr>
          <td><strong>${l.name}</strong></td>
          <td>${l.address}</td>
          <td>${l.radius}</td>
          <td><span class="badge badge-success">Active</span></td>
          <td><button class="btn btn-secondary" style="padding:6px 12px;font-size:12px" onclick="editLocation(${l.id})">Edit</button></td>
        </tr>
      `).join('');
    }
    
    function saveLocation() {
      const name = document.getElementById('loc-name').value;
      const address = document.getElementById('loc-address').value;
      const radius = document.getElementById('loc-radius').value;
      
      if (name && address) {
        locations.push({ id: Date.now(), name, address, radius, status: 'active' });saveData();
        closeModal('location-modal');
        renderLocations();
        document.getElementById('loc-name').value = '';
        document.getElementById('loc-address').value = '';
      } else {
        alert('Please fill in location name and address');
      }
    }
    
    function editLocation(id) {
      const l=locations.find(x=>x.id===id);if(!l)return;const name=prompt('Location name:',l.name);if(!name)return;const address=prompt('Address:',l.address);const radius=prompt('Geofence radius (ft):',l.radius);l.name=name;l.address=address;l.radius=radius;saveData();renderLocations();
    }
    
    // Init
    renderEmployees();
    renderLocations();
      loadData();
  </script>
<footer style="text-align:center;padding:2rem;color:#64748b;border-top:1px solid #e2e8f0"><p>¬© 2026 BuyAppsOnce. Professional software without subscriptions.</p></footer>
</body>
</html>
